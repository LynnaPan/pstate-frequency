#compdef pstate-frequency

_pstate-frequency()
{
	typeset -A opt_args
	_arguments \
		"1: :_actions" \
		"2: :_options"
}

_actions()
{
	_alternative \
		"unprivilaged-actions:unprivilaged actions:_unprivilaged_actions" \
		"privilaged-actions:privilaged actions:_privilaged_actions"
}

_options()
{
	if [ "$words[2]" = "-s" ] || [ "$words[2]" = "--set" ]; then
		_alternative \
			"privilaged-options:privilaged options:_privilaged_options"
	elif [ "$words[2]" = "-g" ] || [ "$words[2]" = "--get" ]; then
		_alternative \
			"unprivilaged-options:unprivilaged options:_unprivilaged_options"
	fi

}

_unprivilaged_options()
{
	local options;
	options=(
		"-i:Get the io scheduler"
	)
	_describe -t unprivilaged-options "unprivilaged options" options "$@"
}

_privilaged_options()
{
	local options;
	options=(
		"-p:Set a pre-defined plan"
		"-m:Set the CPU max"
		"-n:Set the CPU min"
		"-t:Set the CPU turbo"
		"-i:Set the io scheduler"
		"-o:Set the CPU governor"
	)
	_describe -t privilaged-options "privilaged options" options "$@"
}


_unprivilaged_actions()
{
	local actions;
	actions=(
		"-h:Print the help output"
		"-v:Print the current version"
		"-g:Access the current CPU values"
		"-d:Enable debugging mode"
	)
	_describe -t unprivilaged-actions "unprivilaged actions" actions "$@"
}

_privilaged_actions()
{
	local actions;
	actions=(
		"-s:Modify the current CPU values"
	)
	_describe -t privilaged-actions "privilaged actions" actions "$@"
}


_pstate-frequency "$@"

